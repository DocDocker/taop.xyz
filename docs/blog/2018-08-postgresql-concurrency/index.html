<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="generator" content="Hugo 0.50" />
    <meta charset="utf-8">
    <title>The Art of PostgreSQL</title>
    <meta name="description" content="">
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    
    
    <link href="/images/favicon.ico" rel="icon" type="image/x-icon">
    
    
    <link href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900" rel="stylesheet"> 
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/syntax.css">
    
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> 
    <script src="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js"></script>
    <script src="/js/custom.js"></script>

</head>
<body class="blog">

<header class="header"  style="background-color: #67527a; background: url('/images/demo/slide.jpg');">
    <div class="wrapper">
        <a class="logo" href="/">The Art of PostgreSQL</a>
        
        <nav>
            <ul>
                <li><a data-slide=".subscribe_block" href="/">The Book</a></li>
                <li><a data-slide=".packages_block" href="/">PACKAGES</a></li>
                <li><a data-slide=".about_block" href="#">AUTHOR</a></li>
                <li><a data-slide=".quote_slider" href="/blog/">BLOG</a></li>
            </ul>
        </nav>
        
    </div>
    <a data-slide=".price_list" class="button" href="/">PURCHASE</a>
</header>


<div class="single_block">
    <div class="wrapper">
        
        <div class="single_content">

         <p><img src="/img/concurrency-dogs.jpg" alt="" /></p>
         
         <p><a href="https://www.postgresql.org">PostgreSQL</a> is a relational database management
system. It&rsquo;s even the world&rsquo;s most advanced open source one of them. As
such, as its core, Postgres solves concurrent access to a set of data and
maintains consistency while allowing concurrent operations.</p>

<p>In the <a href="/tags/concurrency/">PostgreSQL Concurrency</a> series of articles here
we did see several aspects of how to handle concurrent use cases of your
application design with PostgreSQL. The main thing to remember is that a
Database Management System first task is to handle concurrency access to the
data for you.</p>

<p></p>

<h2 id="postgresql-concurrency">PostgreSQL Concurrency</h2>

<p>In a very classic way, we began our approach to concurrency with a
presentation of the <a href="/blog/2018/06/postgresql-concurrency-data-modification-language/">Data Modification
Language</a>:
the part of SQL that allows to INSERT, UPDATE and DELETE data. And we went
as far designing a small and simple tweeter like application, then using
Shakespeare&rsquo;s <em>A Midsummer Night&rsquo;s Dream</em> play as a source of tweets!</p>

<p>We then reviewed <a href="/blog/2018/07/postgresql-concurrency-isolation-and-locking/">Isolation and
Locking</a> and
how PostgreSQL provides strong <em>ACID</em> guarantees in all your transactions.
The <em>I</em> in <em>ACID</em> stands for <em>Isolation</em>, and by the way the SQL standard
comes with four different isolation levels. The default isolation level in
PostgreSQL is <em>read committed</em> where it would be fair to expect <em>repeatable
read</em>. It&rsquo;s quite important that you understand the difference in between
those two when designing your application, so be sure to check out that
article if you&rsquo;re not so sure.</p>

<p>The next article in the series then logically deals with <a href="/blog/2018/07/modeling-for-concurrency/">Modeling for
Concurrency</a>, with benchmarks to
compare performances of an UPDATE heavy design and an INSERT mostly design.
When dealing with registering and processing of events in PostgreSQL, if you
don&rsquo;t need the processing to be visible at COMMIT time when adding the
event, then it&rsquo;s a good idea to use an INSERT and delayed processing
approach.</p>

<p>If you do that though, then how to implement the delayed processing? Well
I&rsquo;m glad you&rsquo;re asking, and there are more than one way to answer that:</p>

<ul>
<li><p>In <a href="/blog/2018/07/computing-and-caching/">Computing and Caching</a>, we see
how to use a MATERIALIZED VIEW to get a fixed snapshot of the data, and
then easily REFRESH it to implement the application&rsquo;s cache invalidation
policy.</p>

<p>This technique is well adapted to use cases where you want to rebuild
your cache every once in a while, maybe every night, or several times a
day, down to maybe every five minutes if the refreshing of the cache is
really fast.</p></li>

<li><p>In <a href="/blog/2018/07/postgresql-event-based-processing/">PostgreSQL Event Based
Processing</a> we see how
to use TRIGGERs to maintain a transactionally correct cache, and the
impact of such a choice on the scalability properties of your database
backend.</p>

<p>This solution is well suited to use case where the application only
receives a small amount of UPDATE traffic, and quite far apart, and
can&rsquo;t tolerate any lag when using the cache.</p></li>

<li><p>In <a href="/blog/2018/07/postgresql-listen/notify/">PostgreSQL LISTEN/NOTIFY</a>
we see how to build an online cache maintenance service with
PostgreSQL&rsquo;s advanced notification features.</p>

<p>This solution is well suited to use cases where a small amount of lag
can be tolerated, up to maybe some seconds, most typically measured in
the hundreds of milliseconds.</p></li>
</ul>

<p>Another important activity where we need to carefully deal with concurrency
issues is when processing batches of new data to merge with the current
dataset. The article <a href="/blog/2018/07/batch-updates-and-concurrency/">Batch Updates and
Concurrency</a> deals with that
and introduces some advanced PostgreSQL support.</p>

<p>And rather than waving away at using cron jobs to implement batch
activities, the article <a href="/blog/2018/08/scheduled-data-processing-how-to-use-cron/">Scheduled Data Processing: How to use
cron?</a> details a
full technical solution to implemeting those bacthes… still on-top of cron.</p>

<h2 id="conclusion">Conclusion</h2>

<p>The whole article series is extracted from my book <a href="https://masteringpostgresql.com">Mastering PostgreSQL in
Application Development</a>, which teaches SQL
to developers so that they may replace thousands of lines of code with very
simple queries. The book has a full chapter about <em>Data Manipulation and
Concurrency Control</em> in PostgreSQL, including caching with materialized
views, check it out!</p>

            <footer>
                <p><strong>TAGS:</strong> <a href="#">PostgreSQL</a>, <a href="#">YeSQL</a>, <a href="#">Security</a>, <a href="#">SQL Injection</a></p>
            </footer>

            <div class="single_subscribe">
                <p>Subscribe to receive a FREE chapter of the second edition of my book, <b><i>“The Art of PostgreSQL”</i></b> including the full Table of Contents!</p>
                 <script async data-uid="c1452ad801" src="https://f.convertkit.com/c1452ad801/ad53e74e51.js"></script>
            </div>
        </div>

        <aside class="single_sidebar">
 <h6>RECENT POSTS</h6>
 <ul>
 
 <li><a class="previous" href="https://theartofpostgresql.com/blog/2018-07-concurrent-batch-update/"> Batch Updates and Concurrency</a></li>
 
 
 <li><a class="next" href="https://theartofpostgresql.com/blog/2018-08-geolocation-ip4r/"> Geolocation with PostgreSQL</a></li>
 
 </ul>
 
 <h6>TAGS</h6>
 <div class="tag_list">
  
   
     <a href="https://theartofpostgresql.com/tags/postgresql">PostgreSQL</a>
   
     <a href="https://theartofpostgresql.com/tags/yesql">YeSQL</a>
   
     <a href="https://theartofpostgresql.com/tags/concurrency">Concurrency</a>
   
     <a href="https://theartofpostgresql.com/tags/dml">DML</a>
   
     <a href="https://theartofpostgresql.com/tags/listen">LISTEN</a>
   
     <a href="https://theartofpostgresql.com/tags/notify">NOTIFY</a>
   
     <a href="https://theartofpostgresql.com/tags/golang">GoLang</a>
   
     <a href="https://theartofpostgresql.com/tags/json">JSON</a>
   
  
 </div>

 <a href="/#packages" class="banner"><span>What if you could turn thousands of lines of code into simple queries?</span></a>
 
</aside>


    </div>
</div>            
         
 

<footer class="footer">
	<div class="wrapper">
	    <div class="about_block">
	        <h6>about the author</h6>
	        <p>Hi! My name is Dimitri Fontaine and I have been using and contributing to Open Source Software for the best of the last 20 years. I am a PostgreSQL Major Contributor after having contributed Extensions and Event Triggers, among other things.</p>
	        <p>I have been writing code almost daily for a very long time now, both in a professional capacity and on my leisure time. I&rsquo;ve also been a database architect and a DBA on-call. As a developer I enjoy using SQL. As a database architect, I like teaching advanced SQL techniques to my colleagues.</p>
	        <ul>
	            <li><a target="_blank" href="mailto:dim@tapoueh.org">email</a></li>
	            <li><a target="_blank" href="https://twitter.com/tapoueh">twitter</a></li>
	            <li><a target="_blank" href="https://github.com/dimitri/tapoueh.org">github</a></li>
	            <li><a target="_blank" href="https://www.reddit.com/user/theartofpostgresql">reddit</a></li>
	        </ul>
    	</div>
	    <div class="faq_block">
            <h6>FAQ</h6>
	        <dl>
	           <dt>What if the book isn&rsquo;t what I expected it would be?</dt>
	           <dd>The Art of PostgreSQL is a book that teaches SQL to application developers. If it's not of any value to you, then just say so and I'll refund you, no questions asked.</dd>
	           <dt>I bought the book, and I'm confused. What now?</dt>
	           <dd>The content of the book is available as a PDF, ePub and MOBI file, and you can also download the SQL queries. The content is available over at <a href="https://postgresql.thinkific.com/enrollments" target="_">https://postgresql.thinkific.com/</a> from your student dashboard.</dd>
	           <dt>Is there any DRM?</dt>
	           <dd>No. There isn't even watermarking on the PDF. You own what you buy. The sources of data selected for the book are all available with Open Data types of licenses, and the book itself is copyright Dimitri Fontaine. All rights reserved.</dd>
	           <dt>Any other questions?</dt>
	           <dd>Contact me by <a href="mailto:dim@tapoueh.org">email</a> and just ask! I will do my best to answer you.</dd>
	        </dl>
    	</div>
	</div>
</footer>






<div class="copyright">
    <div class="wrapper">
        Copyright 2019 &copy; Dimitri Fontaine. All rights reserved. Design by <a style="color: white; font-weight: bold;" target="_blank" href="https://www.terrilowry.com">TerriLowry.com.</a>
    </div>
</div>


 
</body>
 

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-47059482-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-47059482-5');
</script>


<script>
!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
},s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');

twq('init','o0ial');
twq('track','PageView');
</script>


</html> 

